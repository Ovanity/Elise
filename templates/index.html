{% extends "layout.html" %}
{% block title %}Accueil - Humeurs{% endblock %}
{% block content %}

  <!-- Bloc du mot du jour -->
  <div class="box" style="background-color: #f7f3e9; border-radius: 10px; text-align: center; margin-bottom: 2rem; padding: 1rem;">
    <h1 class="title" style="font-weight: bold; margin-bottom: 0.5rem;">Expression du jour</h1>
    <p class="is-italic" style="font-size: 1.2rem;">
      <strong>{{ word }}</strong>
    </p>
    {% if definition_sentences %}
      <ul style="text-align: left; display: inline-block; margin-top: 1rem;">
        {% for phrase in definition_sentences %}
          <li style="margin-bottom: 0.5rem;">{{ phrase }}.</li>
        {% endfor %}
      </ul>
    {% else %}
      <p style="font-size: 1.2rem; margin-top: 1rem;">Aucune définition trouvée.</p>
    {% endif %}
  </div>

  <!-- Boutons de suggestions d'émotions pour mobile -->
  <div class="columns is-mobile is-multiline" style="margin-bottom: 2rem;">
    <div class="column is-full-mobile is-one-third-tablet">
      <a class="button is-warning is-fullwidth" href="#">
        😰 Stress – Playlist
      </a>
    </div>
    <div class="column is-full-mobile is-one-third-tablet">
      <a class="button is-info is-fullwidth" href="#">
        😓 Anxiété – Respiration
      </a>
    </div>
    <div class="column is-full-mobile is-one-third-tablet">
      <a class="button is-success is-fullwidth" href="https://www.youtube.com/watch?v=3oLtx7xVGRo">
        😌 Détente – 432hz Video
      </a>
    </div>
  </div>

  <h1 class="title">Utilisateurs et leurs dernières humeurs</h1>
  {% for user in users %}
    <div class="box">
      <article class="media">
        <figure class="media-left">
          <p class="image is-64x64">
            <img src="{{ url_for('static', filename='images/' ~ user.profile_pic) }}" alt="Photo de profil de {{ user.username }}">
          </p>
        </figure>
        <div class="media-content">
          <div class="content">
            <h2 class="subtitle">
              <a href="{{ url_for('user_profile', username=user.username) }}">{{ user.username }}</a>
            </h2>
            {% if user.moods %}
              <p>
                Dernière humeur : <strong>{{ user.moods[0].mood_text }}</strong> -
                <em>{{ user.moods[0].created_at.strftime('%d/%m/%Y %H:%M') }}</em>
              </p>
            {% else %}
              <p>Aucune humeur enregistrée.</p>
            {% endif %}
            {% if user.availability == 'Disponible' %}
              <p class="pulsate">Statut : Disponible <span>🙂</span></p>
            {% elif user.availability == 'Seul(e)' %}
              <p class="pulsate">Statut : Préfère être seul(e) <span>😐</span></p>
            {% else %}
              <p>Statut : Inconnu</p>
            {% endif %}
          </div>
        </div>
      </article>
    </div>
  {% endfor %}

  <!-- Bloc explicatif discret en bas de page -->
  <div class="box" style="background-color: #f0f0f0; border-radius: 8px; font-size: 0.9rem; color: #555; margin-top: 2rem; padding: 1rem;">
    <p><strong>Explication :</strong></p>
    <p><em>Expression du jour :</em> Un mot aléatoire en français, sélectionné chaque jour, avec une courte définition pour enrichir notre vocabulaire.</p>
    <p><em>Boutons d'émotions :</em> Les boutons permettent d'accéder à des ressources adaptées à notre état émotionnel (playlist pour le stress, exercice de respiration pour l'anxiété, vidéo relaxante pour la détente).</p>
    <p><em>Liste des utilisateurs :</em> Chaque utilisateur est affiché avec sa photo de profil, sa dernière humeur et son statut (indiquant s'il est disponible pour discuter ou s'il préfère être laissé seul(e)).</p>
  </div>

{% endblock %}